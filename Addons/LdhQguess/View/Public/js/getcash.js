var dataList;require(['zepto','app','index'],function($){var Page={render:function(){var self=this;isOpen=false;$('.icon-item-01').on("click",function(){window.location.href="#home";$('.icon-item').eq(0).addClass('active').siblings().removeClass('active')});$('.icon-item-02').on("click",function(){isOpen=false;window.location.href="#get-cash";$('.icon-item').eq(1).addClass('active').siblings().removeClass('active')});$('.icon-item-03').on("click",function(){window.location.href="#check";$('.icon-item').eq(2).addClass('active').siblings().removeClass('active')});$('.icon-item-04').on("click",function(){window.location.href="#dl";$('.icon-item').eq(3).addClass('active').siblings().removeClass('active')});$('.icon-item-05').on("click",function(){window.location.href="#kf";$('.icon-item').eq(4).addClass('active').siblings().removeClass('active')});$('.jc-item').on("click",function(){$('.xq').show()});$('.xq-btn').on("click",function(){$('.xq').hide()});var params={"playType":1};$.ajax({type:"POST",url:Apis.getWinRecord,data:params,dataType:"json",beforeSend:function(request){request.setRequestHeader("X-Auth-Token",token)},success:function(data){if(data.data!=null&&data.data.length>0){dataList=data.data;var lenght=dataList.length;var htmlE='';for(var i=0;i<lenght;i+=1){var item=dataList[i];htmlE+='<div class="jc-item" data-type='+i+'>';htmlE+='<div>'+item.issueNo+'期</div>';htmlE+='<div>'+parseFloat(item.betAmount/100)+'金币</div>';if(item.status==1){htmlE+='<div>待结算</div>';htmlE+='<div>等待开奖</div>'}else if(item.status==2){if(item.winAmount>0){htmlE+='<div>'+parseFloat(item.winAmount/100)+'金币</div>';htmlE+='<div>中奖</div>'}else{htmlE+='<div>0金币</div>';htmlE+='<div>未中奖</div>'}}else{htmlE+='<div>0金币</div>';htmlE+='<div>开奖失败</div>'}htmlE+='<div class="jc-btn">详情 </div>';htmlE+='</div>'}$('.jc-content').html(htmlE);$('.jc-item').on("tap",function(){console.log($(this).attr("data-type"));var dataItem=dataList[$(this).attr("data-type")];console.log(dataItem);if(dataItem.status==1){$(".xq_num").text("等待开奖");$(".xq_sy").text("-");$(".xq_result").html('<i class="orange">-</i><i class="active">-</i>')}else if(dataItem.status==2){var htmlF='';var lenghtF=dataItem.openOrderNo.length;var eNum=dataItem.openOrderNo[lenghtF-1];var bNum=dataItem.openOrderNo[lenghtF-2];htmlF+='<i>'+dataItem.openOrderNo[lenghtF-3]+'</i>';if(eNum==bNum){htmlF+='<i class="active">'+bNum+'</i>';$(".xq_result").html('<i class="orange">'+eNum+'</i><i class="orange">'+eNum+'</i><i class="active">合</i>')}else{if(eNum>4){$(".xq_result").html('<i class="orange">'+eNum+'</i><i class="active">大</i>')}else{$(".xq_result").html('<i class="orange">'+eNum+'</i><i class="active">小</i>')}htmlF+='<i>'+bNum+'</i>'}htmlF+='<i class="active">'+eNum+'</i>';$(".xq_num").html(htmlF);$(".xq_sy").text(parseFloat(dataItem.winAmount/100))}else{$(".xq_num").text("开奖失败");$(".xq_sy").text("-");$(".xq_result").html('<i class="orange">-</i><i class="active">-</i>')}if(dataItem.discType==1){if(dataItem.betNum=="01234"){$(".xq_bet").html('<i class="orange">小</i>')}else{$(".xq_bet").html('<i class="orange">大</i>')}}else if(dataItem.discType==5){$(".xq_bet").html('<i class="orange">合</i>')}else{var htmlE='';var lenght=dataItem.betNum.length;for(var i=0;i<lenght;i+=1){htmlE+='<i class="orange">'+dataItem.betNum[i]+'</i>'}$(".xq_bet").html(htmlE);$(".xq_sy").text(parseFloat(dataItem.winAmount/100))}$(".xq_qh").text(dataItem.issueNo+"期");$(".xq_odds").text("1赔"+parseFloat(dataItem.odds));$(".xq_kjsj").text(dataItem.openDateLabel);$(".xq_amount").text(parseFloat(dataItem.betAmount/100));$('.xq').show()})}else{}},error:function(error){}})}};Page.render()});